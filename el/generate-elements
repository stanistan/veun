#!/bin/bash

cat << EOF > "$2"
// Code generated by ./generate-elements in $GOFILE with source: $1; DO NOT EDIT.
package $GOPACKAGE
EOF

for line in $(cat $1)
do
  IFS=';' read -ra input <<< "$line"
  el="${input[0]}"
  name="$(echo $el | tr '[:upper:]' '[:lower:]')"
  struct="Element"

  if [ "${input[1]}" = "void" ]; then
    struct="VoidElement"
  fi

  cat << EOF >> "$2"

// $el constructs a veun representation of the $name html element.
//
// This function is autogenerated.
func $el() *$struct {
  return &$struct{tag:"$name"}
}
EOF
done
